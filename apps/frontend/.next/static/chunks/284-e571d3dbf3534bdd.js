(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{61:(e,t,s)=>{"use strict";s.d(t,{BottomNavigation:()=>u});var a=s(4568),n=s(9189),r=s(6226),i=s(2640),l=s(5744),o=s(2942),c=s(9642),d=s.n(c);let m=[{name:"Trang chủ",href:"/",icon:n.A,color:"text-orange-500"},{name:"T\xecm kiếm",href:"/explore",icon:r.A,color:"text-orange-500"},{name:"Lịch tr\xecnh",href:"/planner",icon:i.A,color:"text-orange-500"},{name:"V\xed",href:"/wallet",icon:l.A,color:"text-orange-500"}];function u(){let e=(0,o.usePathname)();return(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:(0,a.jsx)("div",{className:"grid grid-cols-4 py-2",children:m.map(t=>{let s=t.icon,n=e===t.href;return(0,a.jsxs)(d(),{href:t.href,className:"flex flex-col items-center justify-center py-2 px-1",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(n?"bg-orange-500":"hover:bg-gray-100"," transition-colors"),children:(0,a.jsx)(s,{className:"w-6 h-6 ".concat(n?"text-white":"text-gray-600")})}),(0,a.jsx)("span",{className:"text-xs mt-1 ".concat(n?"text-orange-500 font-medium":"text-gray-600"),children:t.name})]},t.name)})})})}},803:(e,t,s)=>{"use strict";s.d(t,{GoogleMap:()=>c});var a=s(4568),n=s(7620),r=s(6182),i=s(9457),l=s(8324),o=s(4338);function c(e){let{restaurants:t,center:s={lat:10.762622,lng:106.660172},onRestaurantSelect:c,className:d=""}=e,m=(0,n.useRef)(null),u=(0,n.useRef)(null),x=(0,n.useRef)([]),g=(0,n.useRef)(null),[h,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),{t:v}=(0,i.s)();return(0,n.useEffect)(()=>{new r.aH({apiKey:o.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||"demo-key",version:"weekly",libraries:["places"]}).load().then(()=>{if(m.current&&!u.current){let e=new google.maps.Map(m.current,{center:s,zoom:14,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1});u.current=e,g.current=new google.maps.InfoWindow,p(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{let s={lat:t.coords.latitude,lng:t.coords.longitude};b(s),new google.maps.Marker({position:s,map:e,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <circle cx="12" cy="12" r="8" fill="#3B82F6" stroke="white" stroke-width="2"/>\n                      <circle cx="12" cy="12" r="3" fill="white"/>\n                    </svg>\n                  '),scaledSize:new google.maps.Size(24,24),anchor:new google.maps.Point(12,12)},title:"Your Location"}),e.setCenter(s)},e=>{console.error("Geolocation error:",e)})}}).catch(console.error)},[s]),(0,n.useEffect)(()=>{h&&u.current&&(x.current.forEach(e=>e.setMap(null)),x.current=[],t.forEach(e=>{if(!u.current)return;let s=new google.maps.Marker({position:e.coordinates,map:u.current,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M16 0C7.163 0 0 7.163 0 16c0 16 16 24 16 24s16-8 16-24c0-8.837-7.163-16-16-16z" fill="'.concat(e.isHiddenGem?"#FFD700":"#FF6B35",'"/>\n              <circle cx="16" cy="16" r="8" fill="white"/>\n              <text x="16" y="20" text-anchor="middle" font-family="Arial" font-size="12" fill="').concat(e.isHiddenGem?"#FFD700":"#FF6B35",'">\n                ').concat(e.isHiddenGem?"\uD83D\uDC8E":"\uD83C\uDF7D️","\n              </text>\n            </svg>\n          ")),scaledSize:new google.maps.Size(32,40),anchor:new google.maps.Point(16,40)},title:e.name});s.addListener("click",()=>{if(!g.current||!u.current)return;let a='\n          <div class="p-4 max-w-sm">\n            <div class="flex items-start space-x-3">\n              <img src="'.concat(e.image,'" alt="').concat(e.name,'" class="w-20 h-20 rounded-lg object-cover" />\n              <div class="flex-1">\n                <h3 class="font-bold text-lg text-gray-900 mb-1">').concat(e.name,'</h3>\n                <p class="text-sm text-gray-600 mb-2">').concat(e.cuisine,'</p>\n                <div class="flex items-center space-x-2 mb-2">\n                  <div class="flex items-center space-x-1">\n                    <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20">\n                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>\n                    </svg>\n                    <span class="font-medium">').concat(e.rating,'</span>\n                  </div>\n                  <span class="text-gray-500">•</span>\n                  <span class="text-green-600 text-sm">').concat(e.priceRange,'</span>\n                </div>\n                <p class="text-sm text-gray-600 line-clamp-2">').concat(e.description,'</p>\n                <div class="mt-3 space-y-2">\n                  <button \n                    onclick="selectRestaurant(\'').concat(e.id,'\')"\n                    class="w-full bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-700 transition-colors"\n                  >\n                    ').concat(v("viewDetails","View Details"),"\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        ");g.current.setContent(a),g.current.open(u.current,s),window.selectRestaurant=e=>{let s=t.find(t=>t.id===e);s&&c&&c(s)}}),x.current.push(s)}))},[h,t,c,v]),(0,a.jsxs)("div",{className:"relative ".concat(d),children:[(0,a.jsx)("div",{ref:m,className:"w-full h-full rounded-lg",style:{minHeight:"400px"}}),!h&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-600",children:v("loadingMap","Loading map...")})]})}),(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-md p-2 space-y-2",children:(0,a.jsxs)("button",{onClick:()=>{f&&u.current&&(u.current.setCenter(f),u.current.setZoom(16))},className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md transition-colors",title:v("goToMyLocation","Go to my location"),children:[(0,a.jsx)(l.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:v("myLocation","My Location")})]})}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-md p-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:v("mapLegend","Legend")}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-orange-600 rounded-full"}),(0,a.jsx)("span",{children:v("restaurants","Restaurants")})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),(0,a.jsx)("span",{children:v("hiddenGems","Hidden Gems")})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:v("yourLocation","Your Location")})]})]})]})]})}},1932:(e,t,s)=>{"use strict";s.d(t,{Container:()=>i,Grid:()=>c,Section:()=>o});var a=s(4568),n=s(3928);let r={sm:"max-w-2xl",md:"max-w-4xl",lg:"max-w-6xl",xl:"max-w-7xl",full:"max-w-full"};function i(e){let{children:t,className:s,size:i="lg"}=e;return(0,a.jsx)("div",{className:(0,n.cn)("mx-auto",n.YK.container,r[i],s),children:t})}let l={white:"bg-white",gray:"bg-gray-50",transparent:"bg-transparent"};function o(e){let{children:t,className:s,background:r="transparent"}=e;return(0,a.jsx)("section",{className:(0,n.cn)(n.YK.section,l[r],s),children:t})}function c(e){let{children:t,className:s,cols:r={default:1,sm:2,lg:3,xl:4},gap:i=6}=e,l="grid-cols-".concat(r.default),o=r.sm?"sm:grid-cols-".concat(r.sm):"",c=r.md?"md:grid-cols-".concat(r.md):"",d=r.lg?"lg:grid-cols-".concat(r.lg):"",m=r.xl?"xl:grid-cols-".concat(r.xl):"";return(0,a.jsx)("div",{className:(0,n.cn)("grid",l,o,c,d,m,"gap-".concat(i),s),children:t})}},2935:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>r});var a=s(4568),n=s(9223);function r(e){let{children:t}=e;return(0,a.jsx)(n.SessionProvider,{children:t})}},3928:(e,t,s)=>{"use strict";s.d(t,{YK:()=>l,cn:()=>r,no:()=>i});var a=s(2987),n=s(607);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,a.$)(t))}let i={mobile:"block md:hidden",desktop:"hidden md:block",tablet:"hidden md:block lg:hidden",largeScreen:"hidden lg:block"},l={container:"px-4 sm:px-6 lg:px-8",section:"py-8 sm:py-12 lg:py-16",grid:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"}},4535:(e,t,s)=>{"use strict";s.d(t,{MobileHeader:()=>p});var a=s(4568),n=s(9457),r=s(313),i=s(9669),l=s(8031),o=s(4150),c=s(773),d=s(7620),m=s(3928),u=s(9223),x=s(9642),g=s.n(x),h=s(1773);function p(e){var t,s;let{className:x}=e,{t:p,changeLanguage:f,currentLanguage:b}=(0,n.s)("navigation"),{data:v}=(0,u.useSession)(),[y,j]=(0,d.useState)(!1),[w,N]=(0,d.useState)(!1),[k,C]=(0,d.useState)(!1),S=[{key:"home",href:"/"},{key:"explore",href:"/explore"},{key:"planner",href:"/planner"},{key:"challenges",href:"/challenges"},{key:"map",href:"/map"},{key:"settings",href:"/settings"}];return(0,a.jsx)("header",{className:(0,m.cn)("bg-white shadow-sm border-b",x),children:(0,a.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Mumii"})}),(0,a.jsx)("nav",{className:m.no.desktop,children:(0,a.jsx)("div",{className:"flex space-x-8",children:S.map(e=>(0,a.jsx)("a",{href:e.href,className:"text-gray-500 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:p(e.key)},e.key))})})," ",(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[v?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>C(!k),className:"flex items-center space-x-2 p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[" ",(null==(t=v.user)?void 0:t.image)?(0,a.jsx)(h.default,{src:v.user.image,alt:v.user.name||"User",width:32,height:32,className:"w-8 h-8 rounded-full"}):(0,a.jsx)(r.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"hidden sm:block text-sm font-medium",children:null==(s=v.user)?void 0:s.name})]}),k&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)(g(),{href:"/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>C(!1),children:[(0,a.jsx)(r.A,{className:"w-4 h-4 mr-2"}),"Profile"]}),(0,a.jsxs)("button",{onClick:()=>{(0,u.signOut)(),C(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g(),{href:"/auth/signin",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Sign In"}),(0,a.jsx)(g(),{href:"/auth/signup",className:"bg-orange-600 text-white hover:bg-orange-700 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Sign Up"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>N(!w),className:"flex items-center space-x-1 text-gray-500 hover:text-gray-900 p-2 rounded-md transition-colors",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium uppercase",children:b})]}),w&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-24 bg-white rounded-md shadow-lg z-50 border",children:[(0,a.jsx)("button",{onClick:()=>{f("en"),N(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"EN"}),(0,a.jsx)("button",{onClick:()=>{f("vi"),N(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"VI"})]})]}),(0,a.jsx)("button",{onClick:()=>j(!y),className:(0,m.cn)("p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",m.no.mobile),children:y?(0,a.jsx)(o.A,{className:"h-6 w-6"}):(0,a.jsx)(c.A,{className:"h-6 w-6"})})]})]}),y&&(0,a.jsx)("div",{className:(0,m.cn)("pb-3 pt-2",m.no.mobile),children:(0,a.jsx)("div",{className:"space-y-1",children:S.map(e=>(0,a.jsx)("a",{href:e.href,className:"text-gray-500 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium transition-colors",onClick:()=>j(!1),children:p(e.key)},e.key))})})]})})}},6488:(e,t,s)=>{"use strict";s.d(t,{SocialShare:()=>u});var a=s(4568),n=s(7620),r=s(1514),i=s(3173),l=s(7754),o=s(1134),c=s(6918),d=s(3919),m=s(9457);function u(e){let{title:t,description:s="",url:u,image:x,hashtags:g=[],className:h=""}=e,[p,f]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),{t:y}=(0,m.s)(),j=u||window.location.href,w="".concat(t," ").concat(s?"- ".concat(s):""),N=g.length>0?g.map(e=>"#".concat(e)).join(" "):"#Mumii #FoodTravel",k=[{name:"Facebook",icon:r.A,color:"bg-blue-600 hover:bg-blue-700",share:()=>{let e="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(j));window.open(e,"_blank","width=600,height=400")}},{name:"Twitter",icon:i.A,color:"bg-sky-500 hover:bg-sky-600",share:()=>{let e="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(w),"&url=").concat(encodeURIComponent(j),"&hashtags=").concat(encodeURIComponent(g.join(",")));window.open(e,"_blank","width=600,height=400")}},{name:"Instagram",icon:l.A,color:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",share:()=>{C("".concat(w," ").concat(j," ").concat(N)),alert(y("social.instagramCopied","Content copied! You can paste it in Instagram."))}}],C=async e=>{try{await navigator.clipboard.writeText(e),v(!0),setTimeout(()=>v(!1),2e3)}catch(e){console.error("Failed to copy text: ",e)}},S=async()=>{if(navigator.share)try{await navigator.share({title:t,text:s,url:j})}catch(e){console.error("Error sharing:",e)}else f(!0)};return(0,a.jsxs)("div",{className:"relative ".concat(h),children:[(0,a.jsxs)("button",{onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:y("social.share","Share")})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>f(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:y("social.shareThis","Share this")}),(0,a.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,a.jsx)("div",{className:"space-y-3 mb-4",children:k.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>{e.share(),f(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-white transition-colors ".concat(e.color),children:[(0,a.jsx)(t,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:y("social.shareOn".concat(e.name),"Share on ".concat(e.name))})]},e.name)})}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("button",{onClick:()=>{C(j),f(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[b?(0,a.jsx)(c.A,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(d.A,{className:"w-5 h-5 text-gray-600"}),(0,a.jsx)("span",{className:"text-gray-800",children:b?y("social.copied","Copied!"):y("social.copyLink","Copy Link")})]})})]})})]})}},6497:(e,t,s)=>{"use strict";s.d(t,{I18nProvider:()=>r});var a=s(4568),n=s(7620);function r(e){let{children:t}=e;return(0,n.useEffect)(()=>{Promise.resolve().then(s.bind(s,9847))},[]),(0,a.jsx)(a.Fragment,{children:t})}s(9847)},7077:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(4568),n=s(2942),r=s(4535),i=s(61);function l(e){let{children:t}=e,s="/"===(0,n.usePathname)();return(0,a.jsxs)(a.Fragment,{children:[!s&&(0,a.jsx)(r.MobileHeader,{}),(0,a.jsx)("main",{className:s?"pb-20":"flex-1 pb-20",children:t}),(0,a.jsx)(i.BottomNavigation,{})]})}},7146:(e,t,s)=>{var a={"./en/common.json":[2415,415],"./en/navigation.json":[2440,440],"./vi/common.json":[8889,889],"./vi/navigation.json":[5126,126]};function n(e){if(!s.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],n=t[0];return s.e(t[1]).then(()=>s.t(n,19))}n.keys=()=>Object.keys(a),n.id=7146,e.exports=n},7972:(e,t,s)=>{"use strict";s.d(t,{NotificationSettings:()=>c});var a=s(4568),n=s(7620),r=s(8115),i=s(9995),l=s(4175),o=s(3262);function c(e){let{className:t}=e,{alertsEnabled:s,enableAlerts:c,disableAlerts:d,nearbyRestaurants:m,location:u,isTracking:x}=function(){let{permission:e,requestPermission:t,sendNotification:s}=function(){let[e,t]=(0,n.useState)({granted:!1,denied:!1,default:!0}),s="Notification"in window&&"serviceWorker"in navigator;(0,n.useEffect)(()=>{s&&(a(),r())},[s]);let a=()=>{let e=Notification.permission;t({granted:"granted"===e,denied:"denied"===e,default:"default"===e})},r=async()=>{try{if("serviceWorker"in navigator){let e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",e)}}catch(e){console.error("Service Worker registration failed:",e)}};return{permission:e,requestPermission:async()=>{if(!s)return!1;try{let e=await Notification.requestPermission();return a(),"granted"===e}catch(e){return console.error("Error requesting notification permission:",e),!1}},sendNotification:(t,a)=>{if(!s||!e.granted)return void console.warn("Notifications not supported or permission not granted");new Notification(t,{icon:"/icon-192x192.png",badge:"/badge-72x72.png",requireInteraction:!0,...a})},isSupported:s}}(),{location:a,startTracking:r,stopTracking:i,isTracking:l}=function(){let[e,t]=(0,n.useState)(null),[s,a]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),c=(0,n.useRef)(null),d="geolocation"in navigator,m=()=>{null!==c.current&&(navigator.geolocation.clearWatch(c.current),c.current=null),o(!1),i(!1)};return(0,n.useEffect)(()=>()=>{m()},[]),{location:e,error:s,loading:r,startTracking:()=>{if(!d)return void a("Geolocation is not supported by this browser");i(!0),a(null),o(!0),c.current=navigator.geolocation.watchPosition(e=>{let s={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:e.timestamp};t(s),a(null),i(!1),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"LOCATION_UPDATE",latitude:s.latitude,longitude:s.longitude})},e=>{let t="An unknown error occurred";switch(e.code){case e.PERMISSION_DENIED:t="Location access denied by user";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable";break;case e.TIMEOUT:t="Location request timed out"}a(t),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},stopTracking:m,isTracking:l}}(),[o,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)([]),u=[{id:"1",lat:21.0285,lng:105.8542,name:"B\xfan Chả Hương Li\xean",radius:100},{id:"2",lat:21.0245,lng:105.8412,name:"Madame Hi\xean",radius:150},{id:"3",lat:21.0375,lng:105.8485,name:"Phở G\xe0 Nghĩa T\xe2n",radius:80}],x=async()=>e.granted||await t()?(r(),c(!0),!0):(alert("Please enable notifications to receive restaurant alerts"),!1);return(0,n.useEffect)(()=>{if(!a||!o)return;let e=[];u.forEach(t=>{let n=function(e,t,s,a){let n=e*Math.PI/180,r=s*Math.PI/180,i=(s-e)*Math.PI/180,l=(a-t)*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(r)*Math.sin(l/2)*Math.sin(l/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371e3}(a.latitude,a.longitude,t.lat,t.lng);n<=t.radius&&(e.push(t.id),d.includes(t.id)||s("\uD83C\uDF7D️ You're near ".concat(t.name,"!"),{body:"Discover amazing food just ".concat(Math.round(n),"m away. Tap to explore!"),tag:"restaurant-".concat(t.id),data:{restaurantId:t.id,url:"/explore?restaurant=".concat(t.id)}}))}),m(e)},[a,o,s]),{alertsEnabled:o,enableAlerts:x,disableAlerts:()=>{i(),c(!1),m([])},nearbyRestaurants:d,location:a,isTracking:l}}(),[g,h]=(0,n.useState)(!1),p=async()=>{s?d():await c()||alert("Unable to enable notifications. Please check your browser settings.")};return(0,a.jsxs)("div",{className:t,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat(s?"bg-green-100":"bg-gray-100"),children:s?(0,a.jsx)(r.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Restaurant Alerts"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:s?"Get notified when near restaurants":"Enable location-based notifications"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>h(!g),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:(0,a.jsx)(l.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:p,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(s?"bg-green-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s?"translate-x-6":"translate-x-1")})})]})]}),s&&(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 ".concat(u?"text-green-600":"text-gray-400")}),(0,a.jsx)("span",{className:u?"text-green-600":"text-gray-600",children:u?"Location: ".concat(u.latitude.toFixed(4),", ").concat(u.longitude.toFixed(4)):x?"Getting your location...":"Location unavailable"})]}),m.length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[m.length," restaurant",1!==m.length?"s":""," nearby"]})]}),(0,a.jsx)("p",{className:"text-xs text-blue-700",children:"You will receive notifications when you are close to recommended restaurants"})]})]}),g&&(0,a.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Notification Preferences"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Hidden gems alerts"}),(0,a.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Mood-based recommendations"}),(0,a.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Challenge updates"}),(0,a.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Group activity notifications"}),(0,a.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"pt-3 border-t border-gray-200",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-700 mb-2",children:"Notification radius"}),(0,a.jsxs)("select",{className:"w-full text-sm border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"50",children:"50 meters"}),(0,a.jsx)("option",{value:"100",selected:!0,children:"100 meters"}),(0,a.jsx)("option",{value:"200",children:"200 meters"}),(0,a.jsx)("option",{value:"500",children:"500 meters"})]})]})]}),!1]})}},9457:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});var a=s(3547),n=s(7620);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common",{t,i18n:s}=(0,a.Bd)(e),[r,i]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{s.isInitialized&&i(!1)},[s.isInitialized]),{t,i18n:s,isLoading:r,currentLanguage:s.language,changeLanguage:e=>{s.changeLanguage(e)},languages:Array.isArray(s.options.supportedLngs)?s.options.supportedLngs.filter(e=>"cimode"!==e):[]}}},9847:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(3796),n=s(3547),r=s(2383),i=s(3076);a.Ay.use(n.r9).use(r.A).use((0,i.A)((e,t)=>s(7146)("./".concat(e,"/").concat(t,".json")))).init({debug:!1,fallbackLng:"en",lng:void 0,interpolation:{escapeValue:!1},preload:[],supportedLngs:["en","vi"],defaultNS:"common",fallbackNS:"common",ns:["common","navigation","auth","errors"],detection:{order:["path","htmlTag","cookie","localStorage","subdomain","querystring","header"],caches:["localStorage","cookie"]}});let l=a.Ay}}]);